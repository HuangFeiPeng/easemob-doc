# 限制条件

<Toc />

本文简要介绍环信即时通讯 IM 的使用限制条件，包括调用频率、字符串大小和编码格式等。

## 用户注册

- 用户 ID：长度不能超过 64 字节，支持以下字符集：
    - 26 个小写英文字母 a-z；
    - 26 个大写英文字母 A-Z；
    - 10 个数字 0-9；
    - “_”, “-”, “.”。

:::notice
- 该参数不区分大小写，因此 Aa 和 aa 为相同用户名；
- 请确保同一个 app 下，用户 ID 唯一；
- 用户 ID 是会公开的信息，请勿使用 UUID、邮箱地址、手机号等敏感信息。
:::
- 批量注册每次最多 60 个用户 ID。

## 好友数限制

私有部署用户好友数无上限

## 消息存储时长限制

私有部署消息存储时长支持自定义，默认配置14天，可在部署前约定存储时间：

## 群组限制

私有部署群组有如下限制：

- 群组总数上限：100,000 个  
- 群成员数：2000人/群，可支持调整至8000人/群
- 用户可加入群组数：无限制


群组属性和群成员属性的限制如下：
- 群组名称，字符串类型，最大长度为 128 字符。
- 群组描述，字符串类型，最大长度为 512 字符。
- 群组扩展信息，例如可以给群组添加业务相关的标记，最大长度为 1,024 字符。
- 单个群成员的自定义属性（key-value）总长度不能超过 4 KB。对于单个自定义属性，属性 key 不能超过 16 字节，value 不能超过 512 个字节。

## 聊天室限制

私有部署聊天室有如下限制：
- 聊天室总数：无限制。
- 聊天室名称，用户自定义，字符串类型，最大长度为 128 字符。
- 聊天室描述，用户自定义，字符串类型，最大长度为 512 字符。

### 聊天室自定义属性（key-value）

每个聊天室最多可有 100 个自定义属性，每个应用的聊天室自定义属性总大小不超过 10 GB。

聊天室自定义属性为键值对（key-value）结构，单个 key 不能超过 128 个字符，支持以下字符集：
- 26 个小写英文字母 a-z；
- 26 个大写英文字母 A-Z；
- 10 个数字 0-9；
- “_”, “-”, “.”。

每个聊天室属性 value 不能超过 4096 个字符。

## 调用频率限制

私有部署Rest API 调用频率支持设置无限制。

## 消息大小限制

对于不同的消息类型，消息长度限制如下：

| 消息类型       | 消息长度限制                         |
| :------------- | :----------------------------------- |
| 文本消息       | 3 KB                                 |
| 图片消息       | 图片不能超过 10 MB，图片消息大小限制为 3 KB。      |
| 语音消息       | 音频文件不能超过 10 MB，语音消息大小限制为 3 KB。    |
| 视频消息       | 视频文件不能超过 10 MB，视频消息大小限制为 3 KB。      |
| 文件消息       | 附件大小不能超过 10 MB，文件消息大小限制为 3 KB。          |
| 透传消息       | 3 KB                                 |
| 自定义消息     | 3 KB                                 |

## 用户属性大小限制

默认单一用户的属性总长不得超过 2 KB。默认一个 app 下所有用户的属性总长度不得超过 10 GB。

## 消息撤回

默认撤回时限为 2 分钟，可根据 App Key 在环信即时通讯云管理后台单独设置。
